---
import { Icon } from 'astro-icon/components';
import OptimizedImage from '../../OptimizedImage.astro';
---

<section class="relative min-h-screen flex items-center justify-center overflow-hidden">
  <!-- Background image -->
  <div class="absolute inset-0 w-full h-full z-0">
    <OptimizedImage 
      src="/images/header.webp" 
      alt="imagen de cabecera" 
      class="w-full h-full object-cover"
      loading="eager"
      decoding="async"
      fetchpriority="high"
      placeholder="/images/header-placeholder.webp"
      sizes="100vw"
      srcset="/images/header-small.webp 640w, /images/header-medium.webp 1024w, /images/header.webp 1920w"
    />
    <!-- Overlay con gradiente más interesante -->
    <div class="absolute inset-0 bg-gradient-to-r from-black/70 to-black/50 z-10"></div>
  </div>
  <!-- Content -->
  <div class="container mx-auto px-4 relative z-20 text-center text-white pt-24">
    <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold mb-6 leading-tight slide-up">
      Eleva tu evento con <span class="text-accent animate-pulse">cócteles extraordinarios</span>
    </h1>
    <p class="text-xl md:text-2xl mb-8 max-w-3xl mx-auto slide-up" style="animation-delay: 0.2s;">
      Servicio profesional de bartender móvil que transforma cualquier ocasión en una experiencia inolvidable
    </p>
    <div class="flex flex-col sm:flex-row gap-4 justify-center slide-up" style="animation-delay: 0.4s;">
      <a 
        href="/es/contact" 
        class="bg-accent hover:bg-accent-dark text-secondary font-semibold px-8 py-3 rounded-md transition-all duration-300 inline-flex items-center justify-center hover:shadow-[0_5px_15px_rgba(212,175,55,0.4)]"
      >
        <Icon name="mdi:calendar-check" class="w-5 h-5 mr-2" />
        Reserva tu evento
      </a>
      <a 
        href="/es/services" 
        class="bg-transparent hover:bg-white/10 border-2 border-white text-white font-semibold px-8 py-3 rounded-md transition-all duration-300 inline-flex items-center justify-center hover:shadow-[0_5px_15px_rgba(255,255,255,0.15)]"
      >
        <Icon name="mdi:glass-cocktail" class="w-5 h-5 mr-2" />
        Explora nuestros servicios
      </a>
    </div>
  </div>
  
  <!-- Partículas decorativas en el fondo -->
  <div class="hero-particles">
    <div class="particle-bg"></div>
    </div>
    
  <!-- Scroll indicator creativo (barra lateral) -->
  <div class="scroll-side-indicator">
    <div class="scroll-progress-container">
      <div class="scroll-progress-bar"></div>
    </div>
    <a href="#services" aria-label="Desplazarse hacia abajo" class="scroll-side-button group">
      <div class="particle-container">
        <span class="particle p1"></span>
        <span class="particle p2"></span>
        <span class="particle p3"></span>
      </div>
      <div class="scroll-icon-wrapper">
        <Icon name="mdi:chevron-down" class="w-6 h-6 text-accent group-hover:text-white transition-colors duration-300" />
      </div>
      <span class="scroll-text">Explorar</span>
    </a>
  </div>
</section>

<style>
  .slide-up {
    opacity: 0;
    transform: translateY(20px);
    animation: slide-up 0.8s forwards ease-out;
  }

  @keyframes slide-up {
    0% {
      opacity: 0;
      transform: translateY(30px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  /* Estilos para el indicador lateral de scroll */
  .scroll-side-indicator {
    position: fixed;
    right: 2rem;
    top: 50%;
    transform: translateY(-50%);
    z-index: 30;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.75rem;
  }
  
  .scroll-progress-container {
    width: 2px;
    height: 100px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 4px;
    overflow: hidden;
    position: relative;
  }
  
  .scroll-progress-bar {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 0;
    background: #D4AF37;
    transition: height 0.1s linear;
  }
  
  .scroll-side-button {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
    cursor: pointer;
    transition: all 0.3s ease;
  }
  
  .scroll-side-button:hover {
    transform: translateY(4px);
  }
  
  .scroll-icon-wrapper {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(4px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    transition: all 0.3s ease;
  }
  
  .scroll-side-button:hover .scroll-icon-wrapper {
    background: rgba(212, 175, 55, 0.2);
    transform: scale(1.1);
  }
  
  .scroll-text {
    font-size: 0.7rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: #D4AF37;
    opacity: 0.8;
    margin-top: 0.25rem;
    transition: opacity 0.3s ease;
  }
  
  .scroll-side-button:hover .scroll-text {
    opacity: 1;
  }
  
  /* Contenedor de partículas */
  .particle-container {
    position: absolute;
    width: 100px;
    height: 100px;
    pointer-events: none;
  }
  
  /* Estilo de las partículas individuales */
  .particle {
    position: absolute;
    width: 4px;
    height: 4px;
    border-radius: 50%;
    background: rgba(212, 175, 55, 0.8);
    pointer-events: none;
    opacity: 0;
  }
  
  .p1 {
    top: 20%;
    left: 30%;
    animation: particleMove1 2s ease-in-out infinite;
  }
  
  .p2 {
    top: 30%;
    right: 20%;
    animation: particleMove2 2.5s ease-in-out infinite 0.3s;
  }
  
  .p3 {
    top: 50%;
    left: 50%;
    animation: particleMove3 3s ease-in-out infinite 0.6s;
  }
  
  @keyframes particleMove1 {
    0% {
      transform: translate(0, 0);
      opacity: 0;
    }
    50% {
      opacity: 1;
    }
    100% {
      transform: translate(-15px, -15px);
      opacity: 0;
    }
  }
  
  @keyframes particleMove2 {
    0% {
      transform: translate(0, 0);
      opacity: 0;
    }
    50% {
      opacity: 1;
    }
    100% {
      transform: translate(15px, -10px);
      opacity: 0;
    }
  }
  
  @keyframes particleMove3 {
    0% {
      transform: translate(0, 0);
      opacity: 0;
    }
    50% {
      opacity: 1;
    }
    100% {
      transform: translate(0, -20px);
      opacity: 0;
    }
  }
  
  /* Partículas de fondo */
  .hero-particles {
    position: absolute;
    inset: 0;
    overflow: hidden;
    z-index: 5;
    pointer-events: none;
  }
  
  .particle-bg {
    width: 100%;
    height: 100%;
    position: relative;
  }
  
  .particle-bg::before,
  .particle-bg::after {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    background-image: 
      radial-gradient(circle at 25% 35%, rgba(212, 175, 55, 0.15) 1px, transparent 1px),
      radial-gradient(circle at 75% 65%, rgba(212, 175, 55, 0.15) 1px, transparent 1px);
    background-size: 40px 40px;
    background-position: 0 0;
    animation: particleFloat 40s linear infinite;
  }
  
  .particle-bg::after {
    background-size: 30px 30px;
    background-position: 15px 15px;
    animation-duration: 60s;
    animation-direction: reverse;
    opacity: 0.5;
  }
  
  @keyframes particleFloat {
    0% {
      transform: translate(0, 0) rotate(0);
    }
    100% {
      transform: translate(-50px, -50px) rotate(5deg);
    }
  }
  
  /* Media queries */
  @media (max-width: 768px) {
    .scroll-side-indicator {
      display: none;
    }
  }
</style>

<script>
  // Función para controlar la animación del scroll lateral
  function handleScrollIndicator() {
    const scrollProgressBar = document.querySelector('.scroll-progress-bar');
    if (scrollProgressBar) {
      const maxScroll = document.body.scrollHeight - window.innerHeight;
      const currentProgress = (window.scrollY / maxScroll) * 100;
      (scrollProgressBar as HTMLElement).style.height = `${Math.min(currentProgress, 100)}%`;
    }
  }

  // Configurar observadores y listeners
  document.addEventListener('DOMContentLoaded', () => {
    window.addEventListener('scroll', handleScrollIndicator);
    handleScrollIndicator(); // Inicializar la posición
    
    // Smooth scroll para los enlaces de navegación
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function(this: HTMLAnchorElement, e: Event) {
        e.preventDefault();
        const targetId = this.getAttribute('href');
        const targetElement = document.querySelector(targetId || '');
        
        if (targetElement) {
          window.scrollTo({
            top: (targetElement as HTMLElement).offsetTop,
            behavior: 'smooth'
          });
        }
      });
    });
  });
</script> 